var dsSeries_01 = {
    "name": "Current Facility Score",
    "type": "bar",
    "field": "fldValue",
    "categoryField": "fldTitle",
    "colorField": "fldColor",
    "color": "rgba(211, 211, 211, 1)",
    "data": [
        {
            "fldId": 1,
            "fldFieldId": "0 - Los Angeles - CA - United States - ABC0005 - Division A - Facility 5",
            "fldTitle": "0 - Los Angeles - CA - United States - ABC0005 - Division A - Facility 5",
            "fldValue": 92.4,
            "InspectionDate": "11/1/2010 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0005",
            "fldToolTip": "1001.0005 - 28 Old Town Place - Los Angeles - CA - United States - 1-Nov-10"
        },
        {
            "fldId": 2,
            "fldFieldId": "1000 - Clark - NJ - United States - ABC0001 - Division D - Facility 1",
            "fldTitle": "1000 - Clark - NJ - United States - ABC0001 - Division D - Facility 1",
            "fldValue": 90.6,
            "InspectionDate": "8/30/2012 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0001",
            "fldToolTip": "1001.0001 - 100 Walnut Avenue, 5th Floor - Clark - NJ - United States - 30-Aug-12"
        },
        {
            "fldId": 3,
            "fldFieldId": "0 - Springfield - MA - United States - ABC0010 - Division B - Facility 10",
            "fldTitle": "0 - Springfield - MA - United States - ABC0010 - Division B - Facility 10",
            "fldValue": 90.6,
            "InspectionDate": "8/30/2012 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0010",
            "fldToolTip": "1001.0010 - 633 Oak Street - Springfield - MA - United States - 30-Aug-12"
        },
        {
            "fldId": 4,
            "fldFieldId": "0 - Florissant - MO - United States - ABC0007 - Division B - Facility 7",
            "fldTitle": "0 - Florissant - MO - United States - ABC0007 - Division B - Facility 7",
            "fldValue": 84,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0007",
            "fldToolTip": "1001.0007 - 654 Howdershell - Florissant - MO - United States - 17-Jul-05"
        },
        {
            "fldId": 5,
            "fldFieldId": "0 - Florissant - MO - United States - ABC0004 - Division A - Facility 4",
            "fldTitle": "0 - Florissant - MO - United States - ABC0004 - Division A - Facility 4",
            "fldValue": 61,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0004",
            "fldToolTip": "1001.0004 - 444A Jacobs Road - Florissant - MO - United States - 17-Jul-05"
        },
        {
            "fldId": 6,
            "fldFieldId": "0 - Bloomsville - CO - United States - ABC0009 - Division A - Facility 9",
            "fldTitle": "0 - Bloomsville - CO - United States - ABC0009 - Division A - Facility 9",
            "fldValue": 60,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0009",
            "fldToolTip": "1001.0009 - 836 East 2nd Street - Bloomsville - CO - United States - 17-Jul-05"
        },
        {
            "fldId": 7,
            "fldFieldId": "460 - Linden - NJ - United States - ABC0003 - Division C - Facility 3",
            "fldTitle": "460 - Linden - NJ - United States - ABC0003 - Division C - Facility 3",
            "fldValue": 59.4,
            "InspectionDate": "3/31/2011 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0003",
            "fldToolTip": "1001.0003 - 943 Route 1 & 9 North - Linden - NJ - United States - 31-Mar-11"
        },
        {
            "fldId": 8,
            "fldFieldId": "0 - Chicago - IL - United States - ABC0006 - Division C - Facility 6",
            "fldTitle": "0 - Chicago - IL - United States - ABC0006 - Division C - Facility 6",
            "fldValue": 50,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0006",
            "fldToolTip": "1001.0006 - 5800 Quaker Blvd. - Chicago - IL - United States - 17-Jul-05"
        },
        {
            "fldId": 9,
            "fldFieldId": "0 - Dallas - TX - United States - ABC0008 - Division C - Facility 8",
            "fldTitle": "0 - Dallas - TX - United States - ABC0008 - Division C - Facility 8",
            "fldValue": 46.8,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0008",
            "fldToolTip": "1001.0008 - 1234 Broad Street, 4th Floor - Dallas - TX - United States - 17-Jul-05"
        },
        {
            "fldId": 10,
            "fldFieldId": "0 - Peterborough -  - Canada - ABC0002 - Division C - Facility 2",
            "fldTitle": "0 - Peterborough -  - Canada - ABC0002 - Division C - Facility 2",
            "fldValue": 42.8,
            "InspectionDate": "7/26/2011 12:00:00 AM",
            "fldColor": "rgba(211, 211, 211, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0002",
            "fldToolTip": "1001.0002 - 469 Park Street North, Bldg 5 - Peterborough -  - Canada - 26-Jul-11"
        }
    ],
    "total": 10
};




var dsSeries_02 = {
    "name": "Facility Score With Recs. Completed",
    "type": "bar",
    "field": "fldValue",
    "categoryField": "fldTitle",
    "colorField": "fldColor",
    "color": "rgba(255, 255, 255, 1)",
    "data": [
        {
            "fldId": 1,
            "fldFieldId": "0 - Los Angeles - CA - United States - ABC0005 - Division A - Facility 5",
            "fldTitle": "0 - Los Angeles - CA - United States - ABC0005 - Division A - Facility 5",
            "fldValue": 95.4,
            "InspectionDate": "11/1/2010 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0005",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 2,
            "fldFieldId": "1000 - Clark - NJ - United States - ABC0001 - Division D - Facility 1",
            "fldTitle": "1000 - Clark - NJ - United States - ABC0001 - Division D - Facility 1",
            "fldValue": 88.6,
            "InspectionDate": "8/30/2012 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0001",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 3,
            "fldFieldId": "0 - Springfield - MA - United States - ABC0010 - Division B - Facility 10",
            "fldTitle": "0 - Springfield - MA - United States - ABC0010 - Division B - Facility 10",
            "fldValue": 99.9,
            "InspectionDate": "8/30/2012 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0010",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 4,
            "fldFieldId": "0 - Florissant - MO - United States - ABC0007 - Division B - Facility 7",
            "fldTitle": "0 - Florissant - MO - United States - ABC0007 - Division B - Facility 7",
            "fldValue": 94,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0007",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 5,
            "fldFieldId": "0 - Florissant - MO - United States - ABC0004 - Division A - Facility 4",
            "fldTitle": "0 - Florissant - MO - United States - ABC0004 - Division A - Facility 4",
            "fldValue": 74,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0004",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 6,
            "fldFieldId": "0 - Bloomsville - CO - United States - ABC0009 - Division A - Facility 9",
            "fldTitle": "0 - Bloomsville - CO - United States - ABC0009 - Division A - Facility 9",
            "fldValue": 63,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0009",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 7,
            "fldFieldId": "460 - Linden - NJ - United States - ABC0003 - Division C - Facility 3",
            "fldTitle": "460 - Linden - NJ - United States - ABC0003 - Division C - Facility 3",
            "fldValue": 62,
            "InspectionDate": "3/31/2011 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0003",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 8,
            "fldFieldId": "0 - Chicago - IL - United States - ABC0006 - Division C - Facility 6",
            "fldTitle": "0 - Chicago - IL - United States - ABC0006 - Division C - Facility 6",
            "fldValue": 59,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0006",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 9,
            "fldFieldId": "0 - Dallas - TX - United States - ABC0008 - Division C - Facility 8",
            "fldTitle": "0 - Dallas - TX - United States - ABC0008 - Division C - Facility 8",
            "fldValue": 55.8,
            "InspectionDate": "7/17/2005 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0008",
            "fldToolTip": "Facility Score With Recs. Completed"
        },
        {
            "fldId": 10,
            "fldFieldId": "0 - Peterborough -  - Canada - ABC0002 - Division C - Facility 2",
            "fldTitle": "0 - Peterborough -  - Canada - ABC0002 - Division C - Facility 2",
            "fldValue": 49.8,
            "InspectionDate": "7/26/2011 12:00:00 AM",
            "fldColor": "rgba(255, 255, 255, 1)",
            "fldMetaChartDrillDownId": null,
            "fldMetaChartDrillDownTypeId": 4,
            "fldFileNo": "1001.0002",
            "fldToolTip": "Facility Score With Recs. Completed"
        }
    ],
    "total": 10
};





var dsResults = {
    "transitions": true,
    "fldId": 4,
    "fldTitlePage": "TEST - Total Facility Rating Score",
    "fldTitlePageSub": "Fire",
    "fldTitleChart": null,
    "fldTitleValueAxis": "Facility Score",
    "series": [dsSeries_01, dsSeries_02],
    "fldPlotBands": [
        {
            "from": 90.1,
            "to": 120,
            "color": "#00FF00",
            "opacity": 0.8,
            "title": "Better Risk >90"
        },
        {
            "from": 60,
            "to": 90,
            "color": "#FFFF00",
            "opacity": 0.8,
            "title": "Typical Risk 60-90"
        },
        {
            "from": 0,
            "to": 59.9,
            "color": "#FF0000",
            "opacity": 0.8,
            "title": "Poorer Risk <60"
        }
    ],
    "fldGRCAverages": 74,
    "fldClientAverages": 68,
    "fldDivsionAverages": 68
}









function createColumn(rect, color) {
    var origin = rect.origin;
    var center = rect.center();
    var bottomRight = rect.bottomRight();
    var radiusX = rect.width() / 2;
    var radiusY = radiusX / 3;
    var gradient = new drawing.LinearGradient({
        stops: [{
            offset: 0,
            color: color
        }, {
            offset: 0.5,
            color: color,
            opacity: 0.9
        }, {
            offset: 0.5,
            color: color,
            opacity: 0.9
        }, {
            offset: 1,
            color: color
        }]
    });

    var path = new drawing.Path({
        fill: gradient,
        stroke: {
            color: "none"
        }
    }).moveTo(origin.x, origin.y)
        .lineTo(origin.x, bottomRight.y)
        .arc(180, 0, radiusX, radiusY, true)
        .lineTo(bottomRight.x, origin.y)
        .arc(0, 180, radiusX, radiusY);

    var topArcGeometry = new geometry.Arc([center.x, origin.y], {
        startAngle: 0,
        endAngle: 360,
        radiusX: radiusX,
        radiusY: radiusY
    });

    var topArc = new drawing.Arc(topArcGeometry, {
        fill: {
            color: color
        },
        stroke: {
            color: "#ebebeb"
        }
    });
    var group = new drawing.Group();
    group.append(path, topArc);
    return group;
}

function createLegendItem(e) {
    var color = e.options.markers.background;
    var labelColor = e.options.labels.color;
    var rect = new geometry.Rect([0, 0], [120, 50]);
    var layout = new drawing.Layout(rect, {
        spacing: 5,
        alignItems: "center"
    });

    var overlay = drawing.Path.fromRect(rect, {
        fill: {
            color: "#fff",
            opacity: 0
        },
        stroke: {
            color: "none"
        },
        cursor: "pointer"
    });

    var column = createColumn(new geometry.Rect([0, 0], [15, 10]), color);
    var label = new drawing.Text(e.series.name, [0, 0], {
        fill: {
            color: labelColor
        }
    })

    layout.append(column, label);
    layout.reflow();

    var group = new drawing.Group().append(layout, overlay);

    return group;
}